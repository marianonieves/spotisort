<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Spoti Sort</title>

  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7ML56F0E8Q"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-7ML56F0E8Q');
</script>
  
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-N7H26368');</script>
  <!-- End Google Tag Manager -->
<link rel="stylesheet" href="./styles.css" />

  <!-- Favicons -->
  <link rel="icon" href="./favicon.ico" sizes="any">
  <link rel="icon" type="image/png" href="./favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="./favicon-16x16.png" sizes="16x16">
  <link rel="apple-touch-icon" href="./apple-touch-icon.png" sizes="180x180">
  <link rel="manifest" href="./site.webmanifest">
  <meta name="theme-color" content="#1ED760">
</head>

<body>
  
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-N7H26368"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
<div class="page">
    <header class="hero">
      <div class="brand">
        <div class="brandMark" aria-hidden="true"></div>
        <div class="brandText">SPOTI SORT</div>
      </div>

      <h1>Sort Your <span class="accent">PLAYLISTs</span></h1>
      <p class="subtitle">
        A lightweight tool for playlist makers — sort by popularity (and more) to keep listeners engaged.
      </p>

      <div class="ctaRow">
        <button id="loginBtn" class="spotifyBtn" type="button">
          <svg class="spotifyIcon" viewBox="0 0 168 168" aria-hidden="true" focusable="false">
            <path fill="currentColor" d="M84 0C37.7 0 0 37.7 0 84s37.7 84 84 84 84-37.7 84-84S130.3 0 84 0zm38.3 121.2c-1.6 2.6-5 3.4-7.6 1.8-20.8-12.7-47-15.6-77.7-8.6-3 .7-6.1-1.1-6.8-4.1-.7-3 1.1-6.1 4.1-6.8 33.8-7.4 63.1-4.1 86.5 10.1 2.6 1.6 3.4 5 1.5 7.6zM133 99.4c-2 3.2-6.1 4.2-9.3 2.2-23.8-14.6-60.1-18.8-88.2-10.3-3.6 1.1-7.4-.9-8.5-4.5-1.1-3.6.9-7.4 4.5-8.5 32.1-9.7 72-5 99.6 11.9 3.1 2 4.1 6.1 1.9 9.2zM134 76.1c-28.5-16.9-75.5-18.4-102.7-10.1-4.3 1.3-8.8-1.1-10.1-5.4-1.3-4.3 1.1-8.8 5.4-10.1 31.2-9.5 83.1-7.7 115.9 11.8 3.8 2.3 5.1 7.2 2.8 11-2.2 3.8-7.2 5.1-10.1 2.8z"/>
          </svg>
          Login with Spotify
        </button>

        <button id="logoutBtn" class="ghostBtn hidden" type="button">Logout</button>
        <span id="me" class="me hidden"></span>
      </div>

      <p id="status" class="status"></p>
    </header>

    <section class="info" id="infoModule">
      <h2>Get your playlists in order</h2>
      <p class="lead">
        Spoti Sort is built for people who craft playlists.
        Ordering by popularity is a simple way to start strong, reduce skips, and keep your playlist fresh over time.
      </p>

      <h3>Just follow <span class="caps">THESE STEPS</span>:</h3>
      <ol class="steps">
        <li>Login with your Spotify credentials</li>
        <li>Pick your playlist</li>
        <li>Sort by clicking the column headings (or use Smart / Random Sort)</li>
        <li>Save the sorted playlist to Spotify (as a new playlist or overwriting the current one)</li>
      </ol>
    </section>

    <main id="appSection" class="app hidden">
      <section class="card">
        <div class="cardHead">
          <h2>Pick your playlist</h2>
          <div class="row">
            <select id="playlistSelect" aria-label="Select playlist">
              <option value="">(loading…)</option>
            </select>
            <button id="loadBtn" class="primaryBtn" type="button">Load</button>
</div>
        </div>
      </section>

      <section class="card">
        <div class="cardHead">
          <h2>Sort &amp; Save</h2>
          <p class="muted">Tip: click a column to sort. Click again to toggle Asc/Desc.</p>
        </div>

        <div class="stack">
          <div class="row wrap">
            <button id="intelligentBtn" class="sortBtn" type="button" disabled title="Popularity desc, duration asc">
              Smart Sort
            </button>
            <button id="randomBtn" class="sortBtn" type="button" disabled title="Shuffle tracks randomly">
              Random Sort
            </button>
            <button id="sortPlaylistBtn" class="sortBtn" type="button" disabled title="Toggle popularity sort (desc/asc)">
              Sort by Popularity
            </button>
            <button id="resetBtn" class="secondaryBtn" type="button" disabled title="Restore original playlist order">
              Reset
            </button>
          </div>

          <div class="row wrap">
            <button id="saveBtn" class="primaryBtn" type="button" disabled>Save sorted playlist to Spotify</button>
            <button id="overwriteBtn" class="secondaryBtn" type="button" disabled title="Replaces the order inside the selected playlist">Overwrite current playlist</button>
            <button id="exportBtn" class="ghostBtn" type="button" disabled>Export CSV</button>
          </div>
        </div>

        <p id="saveStatus" class="muted"></p>
        <p id="featuresWarning" class="warning"></p>
      </section>

      <section class="card">
        <div class="tableWrap">
          <table id="table">
            <thead>
              <tr>
                <th class="num" data-field="index">#</th>
                <th data-field="name">Track</th>
                <th data-field="artist">Artist</th>
                <th class="num" data-field="popularity">Popularity</th>
                <th class="num" data-field="duration_ms">Duration</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
        <p id="stats" class="muted"></p>
      </section>
    </main>

    <footer class="footer">
      <div class="footerLeft">
        Developed by <a href="https://nieves.games/" target="_blank" rel="noreferrer">NIEVES.GAMES</a> (2026)
      </div>

      <div class="footerRight">
        <div class="shareModule">
          <div class="shareCopy">
            <div class="shareTitle">Help other playlist curators boost engagement.</div>
            <div class="shareSub">Share Spoti Sort with someone who builds playlists.</div>
          </div>
          <button id="shareBtn" class="secondaryBtn" type="button">SHARE</button>
        </div>
        <div id="shareMsg" class="shareMsg" aria-live="polite"></div>
      </div>
    </footer>
  </div>

  <script type="module" src="./analytics.js"></script>
  <script type="module" src="./app.js"></script>
</body>
</html>
